<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Players</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='players.css') }}">
    <script>
        function sortPlayersByGeverPoints() {
            let players = Array.from(document.querySelectorAll('li'));
            players.sort((a, b) => {
                let aPoints = parseInt(a.querySelector('span.gever-points').textContent);
                let bPoints = parseInt(b.querySelector('span.gever-points').textContent);
                return bPoints - aPoints;
            });
            let ul = document.querySelector('ul');
            ul.innerHTML = '';
            players.forEach(player => ul.appendChild(player));
        }

        function sortPlayersAlphabetically() {
            let players = Array.from(document.querySelectorAll('li'));
            players.sort((a, b) => {
                let aName = a.querySelector('button').textContent;
                let bName = b.querySelector('button').textContent;
                return aName.localeCompare(bName);
            });
            let ul = document.querySelector('ul');
            ul.innerHTML = '';
            players.forEach(player => ul.appendChild(player));
        }
    </script>
</head>
<body>
    <div class="wrapper">
        <h1></h1>
        
        <!-- Custom container for GiverPoints -->
        <div id="giver-points-container" class="giver-points-display">
            <div class="giver-points-content">
                <span class="giver-points-label">Your GiverPoints:</span>
                <span class="giver-points-value">{{ current_user_giver_points }}</span>
            </div>
        </div>

        <!-- Custom container for Home button -->
        <div id="home-button-container" class="home-button-display">
            <form action="{{ url_for('home') }}" method="GET">
                <button type="submit">Home</button>
            </form>
        </div>

        <!-- Custom container for sorting buttons -->
        <div id="sort-buttons-container" class="sort-buttons-display">
            <div class="sort-button-wrapper">
                <button onclick="sortPlayersByGeverPoints()" class="sort-button winners-loosers">Winners-Loosers</button>
            </div>
            <div class="sort-button-wrapper">
                <button onclick="sortPlayersAlphabetically()" class="sort-button alpha">A-Z</button>
            </div>
        </div>

        <div class="players-box">
            <div class="column-headers">
                <div class="header-gever">Gever</div>
                <div class="header-points">Points</div>
            </div>
            <ul>
                {% for user in users %}
                    {% if user.username != current_username %}
                        <li>
                            <div class="player-row">
                                <form action="{{ url_for('transfer_points', username=user.username) }}" method="GET">
                                    <button type="submit">{{ user.username }}</button>
                                </form>
                                <div class="points-section">
                                    <span></span>
                                    <span class="gever-points">{{ user.gever_points }}</span>
                                </div>
                            </div>
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
    </div>
</body>
</html>